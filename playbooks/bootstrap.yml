# ansible-playbook -i hosts /playbooks/bootstrap.yml --ask-pass
---
- hosts: defaultdevices
  gather_facts: yes
  sudo: true
  vars:
    wifi_country: "GB"
    locale: "en_GB.UTF-8"
    timezone: Europe/London
    hostname: msata_pi

 # vars_prompt:

#  - name: hostname
#    prompt: "please enter a hostname for your new device:"
#    private: no

  tasks:

    # Expand the filesystem
    #- include: ../tasks/expand-filesystem.yml
    #  tags: setup

    # Set Internationalization Options
    #- include: ../tasks/internationalization.yml
    #  tags: setup

    # Set WiFi Options
    #- include: ../tasks/wifi.yml
    #  tags: setup

    #- name: Create SSH folder
    #  file: path=~/.ssh state=directory

    #- name: Set up SSH Key from a template
    #  template: src=../templates/authorized_keys dest=~/.ssh/authorized_keys

    # Run apt-get update and apt-get upgrade 
    #- include: ../tasks/update.yml
     # tags: update

    # Set the hostname
    - include: ../tasks/hostname.yml
      tags: setup

    # install git
    - include: ../tasks/install-git.yml
      tags: setup

    # install nginx
    - include: ../tasks/install-nginx.yml
      tags: setup

    # install fail2ban
    - include: ../tasks/install-fail2ban.yml
      tags: setup

  handlers:

    #- include: ../handlers/reboot.yml
    #  tags: system

    - include: ../handlers/tzdata.yml
      tags: system

  